import{a as b,L as z,r as L,d as u,e as d,f as e,A as N,B as F,g as m,u as t,C as H,c as j,aw as G,av as Q,b as q,l as V,w as S,t as f,h as x,F as $,i as B,ar as J,ag as K}from"./app-DCo35FOi.js";import{c,_ as O,a as W}from"./SearchField-BoA9wSoT.js";import{_ as h}from"./ToggleSwitch-CNzi0B6_.js";import{_ as X}from"./PageLayout-Cv37-oPc.js";import{P as Y}from"./ProductsShowSkeleton-CnM6-Ihg.js";import"./index.esm-DGtFqXNV.js";const Z={class:"border-b border-dashed last:border-b-0 border-main"},ee={class:"p-3"},te={class:"flex items-center"},se={class:"flex flex-col justify-start"},oe={class:"mb-1 font-semibold transition-colors duration-200 ease-in-out text-lg/normal text-secondary-inverse hover:text-blue-500"},ae={class:"p-3 text-start"},ne={class:"pr-0 text-start"},le={class:"p-3 text-start"},re=["disabled"],de={key:0,class:"flex justify-center"},ie={key:1},ce={__name:"CategoryRow",emits:"success:store",setup(A,{emit:v}){const{mutate:k,isLoading:p}=b("categories").useStore(),n=z({name:"",active:!0,promoted:!1}),g=L(null),y=async()=>{await k(n,{onSuccess:()=>{n.name="",n.active=!0,n.promoted=!1}}),g.value.focus()};return(U,l)=>(d(),u("tr",Z,[l[6]||(l[6]=e("td",null,"ID",-1)),e("td",ee,[e("div",te,[e("div",se,[e("span",oe,[N(e("input",{id:"name",type:"text",ref_key:"categoryInput",ref:g,"onUpdate:modelValue":l[0]||(l[0]=r=>n.name=r),placeholder:"Category Name",onChange:l[1]||(l[1]=r=>n.name=r.target.value),class:"mt-1 block w-full p-2 border border-gray rounded-md focus:outline-none focus:ring focus:ring-accent_dark"},null,544),[[F,n.name]])])])])]),e("td",ae,[m(h,{modelValue:n.active,"onUpdate:modelValue":l[2]||(l[2]=r=>n.active=r),"onUpdate:toggle":l[3]||(l[3]=r=>n.active=r)},null,8,["modelValue"])]),e("td",ne,[m(h,{modelValue:n.promoted,"onUpdate:modelValue":l[4]||(l[4]=r=>n.promoted=r),"onUpdate:toggle":l[5]||(l[5]=r=>n.promoted=r)},null,8,["modelValue"])]),e("td",le,[e("button",{onClick:y,type:"submit",disabled:t(p),class:"text-white bg-accent_dark hover:bg-accent_light focus:ring-4 focus:ring-cyan-200 font-medium rounded-lg text-sm px-5 py-2.5 text-center w-full"},[t(p)?(d(),u("span",de,[m(H,{class:"w-8 h-5"})])):(d(),u("span",ie,"Save"))],8,re)])]))}},ue={class:"flex justify-between items-stretch flex-wrap min-h-[70px] pb-6 text-accent"},me={class:"flex flex-col items-start justify-center m-2 ml-0 font-medium text-xl/tight text-dark"},pe={class:"mr-3 font-semibold text-dark"},ge={class:"flex-auto block text-accent"},xe={class:"overflow-x-auto"},_e={class:"w-full my-0 align-middle text-dark border-neutral-200"},fe={key:0,class:"font-bold text-xl my-6"},be={key:2,class:"border-b border-neutral-200 ont-bold text-xl my-6"},he={class:"border-b border-dashed last:border-b-0 border-main"},ve={class:"p-3"},ke={class:"flex items-center"},ye={class:"flex flex-col justify-start"},we={class:"mb-1 font-semibold transition-colors duration-200 ease-in-out text-lg/normal text-secondary-inverse hover:text-blue-500"},Ce=["onUpdate:modelValue","onChange"],Ve={class:"p-3 text-start"},$e={class:"pr-0 text-start"},Ue={class:"pr-0 text-start"},Pe={class:"text-center align-baseline inline-flex px-4 py-3 mr-auto items-center font-semibold text-[.95rem] leading-none rounded-lg w-full"},De=["onChange"],je=["value"],Se={class:"p-3 text-start"},Be={class:"flex items-center gap-2"},Le=["disabled","onClick"],Ne={class:"flex items-center justify-center p-0 m-0 leading-none shrink-0"},Me={__name:"Categories",setup(A){const v=j({get:()=>c.value.search,set:i=>{c.value.search=i,w()}}),k=j({get:()=>c.value.page,set:i=>{c.value.page=i,w()}}),{data:p,error:n,isLoading:g,isError:y,refetch:U,isPreviousData:l}=b("categories").useGet(c),{mutate:r}=b("categories").useUpdate(),{mutate:E,isLoading:I}=b("categories").useDelete(),_=async(i,o,C)=>{const s={...i,[o]:C};r({id:i.id,data:s})},w=G(()=>{U()},300),R=(i,o)=>{o==="increment"&&!l?c.value.page=c.value.page+1:o==="decrement"?c.value.page=Math.max(c.value.page-1,1):(c.value.page=i,w())},[P,D]=Q(),T=async i=>{E(i)},M=L([{title:"Home",link:"/"},{title:"Categories",current:!0,link:"/categories"}]);return(i,o)=>{const C=q("router-link");return d(),V(X,{data:M.value,title:"Categories","onButton:click":o[2]||(o[2]=s=>t(D)(!t(P))),button:{title:"Add New Category",click:!0}},{default:S(()=>[e("div",ue,[e("h3",me,[e("span",pe,"All Categories ("+f(t(p)?.meta.total??0)+")",1),o[3]||(o[3]=e("span",{class:"mt-1 font-medium text-gray text-lg/normal"},"Exlusive from Piepjackclothing",-1))]),m(O,{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=s=>v.value=s)},null,8,["modelValue"])]),e("div",ge,[e("div",xe,[e("table",_e,[o[5]||(o[5]=e("thead",{class:"align-bottom"},[e("tr",{class:"font-semibold text-[0.95rem] text-gray"},[e("th",{class:"pb-3 px-1 text-start uppercase"},"ID"),e("th",{class:"pb-3 px-1 text-start min-w-[175px] uppercase"},"NAME"),e("th",{class:"pb-3 px-1 text-start uppercase"},"PUBLISHED"),e("th",{class:"pb-3 px-1 text-start min-w-[50px] uppercase"}," Promoted "),e("th",{class:"pb-3 px-1 text-start min-w-[50px] uppercase"}," Related to "),e("th",{class:"pb-3 px-1 text-start min-w-[50px] uppercase"}," Details ")])],-1)),e("tbody",null,[!t(p)?.data.length&&!t(g)&&!t(y)?(d(),u("tr",fe," No Categories Found ")):x("",!0),t(g)?(d(),V(Y,{key:1})):x("",!0),t(n)?(d(),u("tr",be,f(t(n)),1)):x("",!0),!t(g)&&t(p)?.data?(d(),u($,{key:3},[t(P)?(d(),V(ce,{key:0,"onSuccess:store":o[1]||(o[1]=s=>t(D)(!1))})):x("",!0),(d(!0),u($,null,B(t(p)?.data,s=>(d(),u("tr",he,[e("td",null,f(s.id),1),e("td",ve,[e("div",ke,[e("div",ye,[e("span",we,[N(e("input",{"onUpdate:modelValue":a=>s.name=a,type:"text",id:"name",onChange:a=>_(s,"name",a.target.value),class:"mt-1 block w-full p-2 border border-gray rounded-md focus:outline-none focus:ring focus:ring-accent_dark"},null,40,Ce),[[F,s.name]])])])])]),e("td",Ve,[m(h,{modelValue:s.active,"onUpdate:modelValue":a=>s.active=a,"onUpdate:toggle":a=>_(s,"active",a)},null,8,["modelValue","onUpdate:modelValue","onUpdate:toggle"])]),e("td",$e,[m(h,{modelValue:s.promoted,"onUpdate:modelValue":a=>s.promoted=a,"onUpdate:toggle":a=>_(s,"promoted",a)},null,8,["modelValue","onUpdate:modelValue","onUpdate:toggle"])]),e("td",Ue,[e("div",Pe,[e("select",{value:null,id:"category_id",onChange:a=>_(s,"parent_id",a.target.value),class:"shadow-md border border-gray text-accent_dark sm:text-sm rounded-lg focus:ring-accent_dark focus:border-accent_dark block w-full p-2.5"},[o[4]||(o[4]=e("option",{value:"",disabled:""},"Select a category",-1)),(d(!0),u($,null,B(t(p)?.data,a=>(d(),u("option",{key:a.id,value:a.id},f(a.name),9,je))),128))],40,De)])]),e("td",Se,[e("div",Be,[e("button",{disabled:t(I),class:"ml-auto relative text-main bg-accent hover:text-white hover:bg-red-500 flex items-center h-[30px] w-[30px] text-base font-medium leading-normal text-center align-middle cursor-pointer rounded-2xl transition-colors duration-200 ease-in-out shadow-none border-0 justify-center",onClick:()=>T(s.id)},[m(t(J),{size:"16","stroke-width":"1.5"})],8,Le),e("button",null,[m(C,{class:"ml-auto relative text-main bg-accent hover:text-white hover:bg-blue-500 flex items-center h-[30px] w-[30px] text-base font-medium leading-normal text-center align-middle cursor-pointer rounded-2xl transition-colors duration-200 ease-in-out shadow-none border-0 justify-center",to:`/admin/categories/${s.id}/${s.slug}`},{default:S(()=>[e("span",Ne,[m(t(K),{size:"16","stroke-width":"1.5"})])]),_:2},1032,["to"])])])])]))),256))],64)):x("",!0)])]),m(W,{currentPage:k.value,totalPages:t(p)?.meta.last_page??1,isFetching:t(g),onPageChanged:R},null,8,["currentPage","totalPages","isFetching"])])])]),_:1},8,["data"])}}};export{Me as default};
