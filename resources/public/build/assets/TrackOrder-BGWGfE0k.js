import{_ as D,p as F,q as T,s as M,r as k,v as L,x as V,c as q,a as A,o as C,y as E,d,e as l,f as t,h as _,t as r,z as j,A as b,B as g,u as s,l as y,C as z,F as I,i as Q,D as U}from"./app-DCo35FOi.js";const G={class:"grid place-content-center justify-center justify-items-center"},K={class:"p-4 relative trackOrder min-w-48"},R={class:"tracking-container"},H={class:"title"},J=["placeholder"],P=["placeholder"],W=["disabled"],X={key:1},Y={key:1,class:"order-details"},Z={class:"subtitle"},x={class:"details-grid"},ee={class:"font-semibold"},te={class:"font-semibold"},ae={class:"font-semibold"},se={class:"products-list"},re={key:2,class:"error-message"},oe={__name:"TrackOrder",setup(le){const{t:p}=F(),N=T(),m=M(),$=m.params.slug,i=k(1),a=L("active-track-form",{email:V.value.email||"",orderNr:""});a.value.orderNr=m.params.id?m.params.id:a.value.orderNr;const h=q(()=>a.value.orderNr),{data:c,isLoading:v,refetch:w}=A("orders").useGetById(h.value||a.value.orderNr),u=k(""),O=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),B=async()=>{try{const{data:e}=await w();if(!e)throw new Error(p("common.alerts.orderNotFound"));i.value=2}catch(e){u.value=e.message,console.error("Failed to fetch order:",e)}},f=async()=>{if(!a.value.email||!a.value.orderNr){u.value=p("common.alerts.fillAllFields");return}u.value="",h.value=a.value.orderNr,await B()},S=()=>{i.value=Math.max(i.value-1,1)};return C(()=>{$==="success"&&(i.value=1,N.success(p("common.alerts.trackSuccess"))),a.value.email&&a.value.orderNr&&f()}),E(()=>m.params.id,e=>{e&&(a.value.orderNr=e,f())}),(e,o)=>(l(),d("div",G,[t("div",K,[t("div",R,[t("h1",H,r(e.$t("pages.tracking.title")),1),i.value===1?(l(),d("form",{key:0,class:"tracking-form",onSubmit:j(f,["prevent"]),"aria-label":"Track Order Form"},[b(t("input",{"onUpdate:modelValue":o[0]||(o[0]=n=>s(a).email=n),class:"input-field",type:"email",placeholder:e.$t("validation.form.email"),required:"","aria-label":"Email Address"},null,8,J),[[g,s(a).email]]),b(t("input",{"onUpdate:modelValue":o[1]||(o[1]=n=>s(a).orderNr=n),class:"input-field",type:"text",placeholder:e.$t("validation.form.orderNumber"),required:"","aria-label":"Order Number"},null,8,P),[[g,s(a).orderNr]]),t("button",{type:"submit",class:"submit-button",disabled:s(v),"aria-label":"Track Order Button"},[s(v)?(l(),y(z,{key:0,center:"",size:"xs"})):(l(),d("span",X,r(e.$t("components.buttons.track")),1))],8,W)],32)):_("",!0),i.value===2&&!s(v)&&s(c)?.data?.products?(l(),d("div",Y,[t("h2",Z,r(e.$t("pages.tracking.orderDetails")),1),t("div",x,[t("p",null,r(e.$t("pages.tracking.status"))+":",1),t("p",ee,r(s(c)?.data.status||e.$t("common.unknown")),1),t("p",null,r(e.$t("pages.tracking.date"))+":",1),t("p",te,r(O(s(c)?.data.created_at)),1),t("p",null,r(e.$t("pages.tracking.orderNr"))+":",1),t("p",ae,r(s(c)?.data.order_number),1)]),o[2]||(o[2]=t("hr",null,null,-1)),t("div",se,[(l(!0),d(I,null,Q(s(c)?.data.products,n=>(l(),y(U,{key:n.item,product:n,item:n.item,label:"no-label"},null,8,["product","item"]))),128))]),o[3]||(o[3]=t("hr",null,null,-1)),t("button",{onClick:S,class:"back-button"},r(e.$t("components.buttons.back")),1)])):_("",!0),u.value?(l(),d("div",re,r(u.value),1)):_("",!0)])])]))}},ie=D(oe,[["__scopeId","data-v-47fa38b4"]]);export{ie as default};
