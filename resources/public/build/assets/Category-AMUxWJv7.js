import{d as s,e as o,f as e,K as H,h as p,g as y,u as n,at as T,G as O,s as z,L as S,a as m,av as U,F as h,i as V,w as B,k as w,t as $,l as F,A as _,B as L,af as I,o as q,b as E,a1 as M,z as K,r as P}from"./app-DCo35FOi.js";import{_ as Q}from"./PageLayout-Cv37-oPc.js";import"./index.esm-DGtFqXNV.js";const R={class:"mr-5 mt-px"},A={__name:"Badge",props:{colorClass:{type:String,default:"bg-linear-to-tr from-slate-600 to-slate-400"},closeButtonClass:{type:String,default:"bg-slate-400 hover:bg-slate-900"},delete:{type:Boolean,default:!1}},setup(g){return(c,t)=>(o(),s("div",{class:O(["center relative inline-block select-none whitespace-nowrap rounded-lg py-2 px-3.5 align-baseline text-sm font-bold leading-none text-white",g.colorClass]),"data-dismissible":"chip"},[e("div",R,[H(c.$slots,"default")]),e("div",{class:O(["absolute top-1 right-1 mx-px mt-[0.5px] w-max rounded-md transition-colors",g.closeButtonClass]),"data-dismissible-target":"chip"},[g.delete?(o(),s("div",{key:0,role:"button",class:"h-5 w-5 p-1 grid place-content-center",onClick:t[0]||(t[0]=d=>c.$emit("handle:delete"))},[y(n(T),{size:"16"})])):p("",!0)],2)],2))}},X={class:"flex items-start gap-5 text-accent my-3 flex-wrap"},j={key:0,class:"grid gap-2 m-0"},J={class:"flex items-center text-accent"},W={class:"flex items-center gap-4 my-3"},Y={key:0,class:"flex items-center gap-3 my-3 text-accent"},Z={key:1,class:"flex items-center gap-3 my-3 text-accent"},ee=["value"],te={__name:"Variants",setup(g){const t=z().params.id,d=S({category_id:t,name:""}),l=S({variation_id:null,value:""}),{mutate:x}=m("variations").useStore(),{mutate:f}=m("variations-options").useStore();m("variations").useDelete();const{mutate:k}=m("variation-options").useDelete(),{data:b,isLoading:u}=m("category-variations").useGetById(t),r=async()=>{await x(d,{onSuccess:()=>{d.name="",d.variation_id=null}})},C=async()=>{await f(l,{onSuccess:()=>{l.value=""}})},[v,ve]=U(),[D,G]=U();return(be,a)=>(o(),s(h,null,[a[9]||(a[9]=e("h5",{class:"font-bold text-accent text-xl"},"Variants",-1)),e("div",X,[n(b)?.data?(o(!0),s(h,{key:0},V(n(b).data,i=>(o(),s("div",{key:i.id,class:"flex flex-row items-start space-x-2"},[y(A,{colorClass:"bg-slate-400"},{default:B(()=>[w($(i.name),1)]),_:2},1024),i.options?(o(),s("div",j,[(o(!0),s(h,null,V(i.options,N=>(o(),F(A,{key:N.id,delete:!0,colorClass:"bg-indigo-400",closeButtonClass:"bg-indigo-400","onHandle:delete":_e=>n(k)(i.id)},{default:B(()=>[w($(N.value),1)]),_:2},1032,["onHandle:delete"]))),128))])):p("",!0)]))),128)):(o(),s(h,{key:1},[w(" No Variants Added ")],64))]),e("div",J,[a[5]||(a[5]=e("div",null,null,-1)),e("div",null,[e("button",{type:"button",onClick:a[0]||(a[0]=i=>n(G)(!n(D))),class:"bg-accent_dark text-white p-2 rounded-md hover:bg-accent_light transition duration-200"},a[4]||(a[4]=[e("span",null,"Add Option",-1)]))])]),e("div",W,[n(v)?(o(),s("div",Y,[a[6]||(a[6]=e("label",{for:"variant",class:"font-bold"},"New Variant",-1)),_(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>d.name=i),type:"text",placeholder:"Variant",name:"variant",onChange:r,id:"variant",class:"mt-1 block p-2 border border-gray rounded-md focus:outline-none focus:ring focus:ring-accent_dark"},null,544),[[L,d.name]])])):p("",!0),n(D)?(o(),s("div",Z,[a[8]||(a[8]=e("label",{for:"variant",class:"font-bold"},"New Option",-1)),_(e("select",{"onUpdate:modelValue":a[2]||(a[2]=i=>l.variation_id=i),name:"variants",id:"variants",class:"mt-1 block p-2 border border-gray rounded-md focus:outline-none focus:ring focus:ring-accent_dark"},[a[7]||(a[7]=e("option",{value:"",disabled:""},"Select a variant",-1)),(o(!0),s(h,null,V(n(b)?.data,i=>(o(),s("option",{key:i.id,value:i.id},$(i.name),9,ee))),128))],512),[[I,l.variation_id]]),_(e("input",{"onUpdate:modelValue":a[3]||(a[3]=i=>l.value=i),type:"text",name:"option",placeholder:"Option",onChange:C,id:"option",class:"mt-1 block p-2 border border-gray rounded-md focus:outline-none focus:ring focus:ring-accent_dark"},null,544),[[L,l.value]])])):p("",!0)])],64))}},ae={class:"mb-4"},oe={class:"flex items-cetner gap-4"},ne={class:"mb-4"},se={for:"active",class:"flex items-center"},ie={class:"mb-4"},re={for:"promoted",class:"flex items-center"},le={class:"flex items-center gap-3 mb-3"},de=["disabled"],ce={key:0},ue={key:1},me=["disabled"],pe={key:0},ge={key:1},fe={__name:"CategoryForm",props:{data:{required:!0}},setup(g){const c=g,t=S({id:null,name:"",parent_id:null,active:!1,promoted:!1});q(()=>{const u=c.data.data;t.id=u.id,t.name=u.name,t.image=u.image,t.description=u.description,t.active=u.active});const{mutate:d,isLoading:l}=m("categories").useUpdate(),{mutate:x,isLoading:f}=m("categories").useDelete(),k=async()=>{await d({id:t.id,data:t})},b=async()=>{x(id),router.push("/categories")};return(u,r)=>{const C=E("Spinner");return o(),s("form",{onSubmit:K(k,["prevent"]),class:"text-accent font-bold text-sm mt-3"},[e("div",ae,[r[3]||(r[3]=e("label",{for:"name",class:"block"},"Name",-1)),_(e("input",{"onUpdate:modelValue":r[0]||(r[0]=v=>t.name=v),type:"text",id:"name",class:"mt-1 block w-full p-2 border border-gray rounded-md focus:outline-none focus:ring focus:ring-accent_dark"},null,512),[[L,t.name]])]),e("div",oe,[e("div",ne,[e("label",se,[_(e("input",{"onUpdate:modelValue":r[1]||(r[1]=v=>t.active=v),type:"checkbox",id:"active",class:"mr-2"},null,512),[[M,t.active]]),r[4]||(r[4]=w(" Active "))])]),e("div",ie,[e("label",re,[_(e("input",{"onUpdate:modelValue":r[2]||(r[2]=v=>t.promoted=v),type:"checkbox",id:"promoted",class:"mr-2"},null,512),[[M,t.promoted]]),r[5]||(r[5]=w(" Promoted "))])])]),e("div",le,[e("button",{onClick:b,disabled:n(f),class:"w-full bg-red-500 text-white p-2 rounded-md hover:bg-red-600 transition duration-200"},[n(f)?p("",!0):(o(),s("span",ce,"Delete Category")),n(f)?(o(),s("span",ue,[y(C)])):p("",!0)],8,de),e("button",{type:"submit",disabled:n(l),class:"w-full bg-accent_dark text-white p-2 rounded-md hover:bg-accent_light transition duration-200"},[n(l)?p("",!0):(o(),s("span",pe,"Update Category")),n(l)?(o(),s("span",ge,[y(C)])):p("",!0)],8,me)])],32)}}},he={__name:"Category",setup(g){const c=z(),t=c.params.id,d=c.params.slug,{data:l,error:x,isLoading:f}=m("categories").useGetById(t),k=P([{title:"Home",link:"/"},{title:"Categories",link:"/categories"},{title:d,current:!0,link:""}]);return(b,u)=>(o(),F(Q,{data:k.value,title:n(l)?.data?.name,isLoading:n(f),error:n(x)},{default:B(()=>[y(fe,{data:n(l)},null,8,["data"]),y(te)]),_:1},8,["data","title","isLoading","error"]))}};export{he as default};
