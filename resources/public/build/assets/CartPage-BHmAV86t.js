import{d as r,e as s,f as t,t as o,h as b,F as p,i as y,g as $,W as T,U as j,q as I,p as L,o as O,S as h,V as P,X as V,Y as q,c as B,b as v,u as f,l as w,Z as K,w as k,k as C}from"./app-DCo35FOi.js";const M={class:"cart-product-product"},S={class:"cart-product-product-info"},A=["src","alt"],E={class:"cart-product-product-name"},F={class:"cart-product-product-options"},H={key:0,class:"cart-product-product-id"},N={class:"cart-product-option-name"},z={class:"cart-product-option-value"},x={key:1,class:"cart-product-product-price"},Q={class:"cart-product-quantity"},U={class:"cart-product-total"},D={__name:"CartProduct",props:{product:{type:Object,required:!0},item:{type:Object,required:!0},addToCart:{type:Boolean,default:!1},label:{type:String,default:""}},setup(a){return(m,g)=>(s(),r(p,null,[t("td",M,[t("div",S,[t("img",{src:a.item?.image_url??"https://raw.githubusercontent.com/Loopple/loopple-public-assets/main/riva-dashboard-tailwind/img/img-49-new.jpg",alt:a.product.name,loading:"lazy",class:"cart-product-product-image"},null,8,A),t("h6",E,[t("strong",null,o(a.product.name)+" (#"+o(a.product.id)+")",1)]),t("div",F,[a.item?.price?(s(),r("p",H," id : "+o(a.item?.id),1)):b("",!0),(s(!0),r(p,null,y(a.item?.options,(n,_)=>(s(),r("div",{key:_,class:"cart-product-product-option"},[t("p",N,o(n.name)+":",1),t("p",z,o(n.value),1)]))),128)),a.item?.price?(s(),r("p",x,o(a.item?.price)+" "+o(m.$currency),1)):b("",!0)])])]),t("td",Q,[$(T,{addToCart:a.addToCart,modelValue:a.item.cartQuantity,product:a.product,item:a.item,max:a.item.quantity},null,8,["addToCart","modelValue","product","item","max"])]),t("td",U,o((a.item.cartQuantity*a.item.price).toFixed(2))+" "+o(m.$currency),1)],64))}},W={class:"cart-page"},X={class:"cart-page-title"},Y={class:"cart-page-shipping-info"},Z={class:"cart-page-shipping-text"},G=["innerHTML"],J={class:"cart-page-container"},R={class:"cart-page-table"},tt={class:"cart-page-table-header"},et={class:"cart-page-table-row"},at={class:"cart-page-table-cell"},ot={class:"cart-page-table-header-text"},ct={class:"cart-page-table-cell"},st={class:"cart-page-table-header-text"},rt={class:"cart-page-table-cell cart-page-table-total"},nt={class:"cart-page-table-header-text"},it={class:"cart-page-item-row"},lt={class:"cart-page-summary"},dt={class:"cart-page-summary-content"},ut=["innerHTML"],mt={__name:"CartPage",setup(a){const{getApiUrl:m}=j(),g=I(),{t:n}=L();O(async()=>{if(h.value.cartItems.length)for(const e of h.value.cartItems)try{const l=(await P.get(`${m()}/products/${e.id}`)).data.data;if(!l){g.warning(n("cart.product_invalid",{id:e.id}));continue}Object.keys(l).forEach(c=>{Object.prototype.hasOwnProperty.call(e,c)&&c!=="items"&&V({productId:e.id,key:c,value:l[c]})}),e.items&&(e.items=e.items.map(c=>{const d=l.items.find(i=>i.id===c.id);return d?(Object.keys(d).forEach(i=>{Object.prototype.hasOwnProperty.call(c,i)&&q({productId:e.id,itemId:c.id,key:i,value:d[i]})}),c):(g.warning(n("components.cart.item_invalid",{id:c.id})),null)}).filter(Boolean))}catch(u){console.error(`Error validating product ${e.id}:`,u.message)}});const _=B(()=>`${n("components.cart.taxIncluded")} ${n("components.cart.shippingCalc")}`);return(e,u)=>{const l=v("LockKeyhole"),c=v("router-link");return s(),r("div",W,[t("h1",X,o(e.$t("components.cart.title")),1),t("div",Y,[t("span",Z,[t("strong",{innerHTML:e.$t("components.cart.shippingFree")},null,8,G)])]),t("div",J,[t("table",R,[t("thead",tt,[t("tr",et,[t("th",at,[t("p",ot,o(e.$t("components.cart.products")),1)]),t("th",ct,[t("p",st,o(e.$t("components.cart.quantity")),1)]),t("th",rt,[t("p",nt,o(e.$t("components.cart.total")),1)])])]),t("tbody",null,[(s(!0),r(p,null,y(f(h).cartItems,d=>(s(),r(p,null,[(s(!0),r(p,null,y(d.items,i=>(s(),r("tr",it,[$(D,{product:d,item:i},null,8,["product","item"])]))),256))],64))),256))])]),t("div",lt,[t("div",dt,[t("p",null,o(e.$t("components.cart.totalAmount",{total:f(K)()}))+" "+o(e.$currency),1),t("p",{innerHTML:_.value,class:"cart-page-summary-info"},null,8,ut),f(h).cartItems.length>0?(s(),w(c,{key:0,to:"/checkout",class:"cart-page-checkout-button view-all jello-horizontal"},{default:k(()=>[$(l,{size:"18"}),C(" "+o(e.$t("components.cart.checkout")),1)]),_:1})):(s(),w(c,{key:1,to:"/collections",onClick:u[0]||(u[0]=()=>{e.props.open&&e.emit("close")}),class:"cart-page-continue-shopping view-all"},{default:k(()=>[C(o(e.$t("components.buttons.weiterKaufen")),1)]),_:1}))])])])])}}};export{mt as default};
