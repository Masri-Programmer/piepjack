import{a as p,r as u,E as h,l as w,e as r,w as P,f as t,z as S,A as n,d,h as c,G as m,B as v,t as i,F as C,i as E,u as V,af as $,a1 as A}from"./app-DCo35FOi.js";import{c as B,e as U,d as q,a as f,f as D}from"./index.esm-DGtFqXNV.js";import{_ as M}from"./PageLayout-Cv37-oPc.js";const N={class:"space-y-6"},F={class:"grid grid-cols-6 gap-6"},z={class:"col-span-6 sm:col-span-3"},G={key:0,class:"text-red-500 text-sm"},I={class:"col-span-6 sm:col-span-3"},T=["value"],j={key:0,class:"text-red-500 text-sm"},H={class:"col-span-full"},L={key:0,class:"text-red-500 text-sm"},O={class:"col-span-full"},Q={key:0,class:"text-red-500 text-sm"},R={class:"col-span-full flex"},J={key:0,class:"text-red-500 text-sm"},Z={__name:"StoreProduct",setup(K){const{data:g}=p("all-categories").useGet({}),s=u({name:"",category_id:"",description:"",image:null,active:!1}),a=u({name:null,category_id:null,description:null,image:null,active:null}),b=B().shape({name:f().required("Product name is required").max(1024),category_id:D().nullable().typeError("Category must be a valid number"),description:f().nullable(),image:q().nullable().test("fileType","Only image files are allowed",o=>o?["image/jpeg","image/png"].includes(o.type):!0),active:U().required("Active status is required")}),{mutate:_}=p("products").useStore();h();const x=async()=>{try{await b.validate(s.value,{abortEarly:!1}),s.value.active=s.value.active?1:0,_(s.value)}catch(o){a.value={},o.inner.forEach(e=>{a.value[e.path]=e.message})}},k=o=>{const e=o.target.files[0];s.value.image=e},y=u([{title:"Home",link:"/"},{title:"Products",current:!0,link:"/products"},{title:"Add Product",current:!0,link:""}]);return(o,e)=>(r(),w(M,{data:y.value,title:"Add Product"},{default:P(()=>[t("div",N,[t("form",{onSubmit:S(x,["prevent"])},[t("div",F,[t("div",z,[e[4]||(e[4]=t("label",{for:"name",class:"text-sm font-medium text-accent_dark block mb-2"},"Product Name",-1)),n(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>s.value.name=l),id:"name",class:m(["shadow-md border border-gray text-accent_dark sm:text-sm rounded-lg focus:ring-accent_dark focus:border-accent_dark block w-full p-2.5",{"border-red-500":a.value.name}]),placeholder:"Name”"},null,2),[[v,s.value.name]]),a.value.name?(r(),d("p",G,i(a.value.name),1)):c("",!0)]),t("div",I,[e[6]||(e[6]=t("label",{for:"category_id",class:"text-sm font-medium text-accent_dark block mb-2"},"Category",-1)),n(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.category_id=l),id:"category_id",class:m(["shadow-md border border-gray text-accent_dark sm:text-sm rounded-lg focus:ring-accent_dark focus:border-accent_dark block w-full p-2.5",{"border-red-500":a.value.category_id}])},[e[5]||(e[5]=t("option",{value:"",disabled:""},"Select a category",-1)),(r(!0),d(C,null,E(V(g),l=>(r(),d("option",{key:l.id,value:l.id},i(l.name),9,T))),128))],2),[[$,s.value.category_id]]),a.value.category_id?(r(),d("p",j,i(a.value.category_id),1)):c("",!0)]),t("div",H,[e[7]||(e[7]=t("label",{for:"description",class:"text-sm font-medium text-accent_dark block mb-2"},"Product Details",-1)),n(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.description=l),id:"description",rows:"6",class:m(["border border-gray text-accent_dark sm:text-sm rounded-lg focus:ring-accent_dark focus:border-accent_dark block w-full p-4",{"border-red-500":a.value.description}]),placeholder:"Details"},null,2),[[v,s.value.description]]),a.value.description?(r(),d("p",L,i(a.value.description),1)):c("",!0)]),t("div",O,[e[8]||(e[8]=t("label",{for:"image",class:"text-sm font-medium text-accent_dark block mb-2"},"Image",-1)),t("input",{type:"file",onChange:k,class:"block w-full text-sm text-accent_dark file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-accent_dark file:text-white hover:file:bg-accent focus:ring-accent_dark focus:border-accent_dark"},null,32),a.value.image?(r(),d("p",Q,i(a.value.image),1)):c("",!0)]),t("div",R,[n(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.active=l),id:"active",class:"mr-2"},null,512),[[A,s.value.active]]),e[9]||(e[9]=t("label",{for:"active",class:"text-sm font-medium text-accent_dark mb-2"},"Active",-1)),a.value.active?(r(),d("p",J,i(a.value.active),1)):c("",!0)])]),e[10]||(e[10]=t("div",{class:"p-6 ps-0 pb-0 border-t border-gray-200 rounded-b"},[t("button",{class:"text-white bg-accent_dark hover:bg-accent_light focus:ring-4 focus:ring-accent_light font-medium rounded-lg text-sm px-5 py-2.5 text-center",type:"submit"}," Save all ")],-1))],32)])]),_:1},8,["data"]))}};export{Z as default};
