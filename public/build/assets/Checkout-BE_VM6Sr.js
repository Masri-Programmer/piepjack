import{d as u,e as c,f as t,k as F,t as s,g as p,u as m,ae as ee,L as W,p as G,a as te,r as w,c as oe,o as ae,b as B,A as y,B as E,x as i,G as k,w as _,h as g,O as x,af as se,F as S,i as A,$ as re,C as ne,z as le,V as ie,y as ce,S as L,l as M,ag as de,ah as ue,D as me,ai as pe,Z as I,aj as fe}from"./app-BhPL1WV_.js";import{c as R,a as $,b as he,d as ve}from"./index.esm-C4V_AnxG.js";const _e={class:"absolute top-2 md:top-0 right-10 md:right-0"},$e={class:"group relative"},ge={class:"absolute bottom-[calc(100%+0.5rem)] left-[50%] -translate-x-[50%] hidden group-hover:block w-auto"},be={class:"bottom-full right-0 bg-black px-4 py-1 text-xs text-white z-999 md:whitespace-nowrap"},ye={__name:"Tooltip",props:{content:String},setup(f){return(e,a)=>(c(),u("div",_e,[t("span",$e,[t("div",ge,[t("div",be,[F(s(f.content)+" ",1),a[0]||(a[0]=t("svg",{class:"absolute left-0 top-full h-2 w-full text-black",x:"0px",y:"0px",viewBox:"0 0 255 255","xml:space":"preserve"},[t("polygon",{class:"fill-current",points:"0,0 127.5,127.5 255,0"})],-1))])]),t("span",null,[p(m(ee),{size:"16"})])])]))}},ke={class:"contact-form-section"},we={class:"contact-form-title"},Se={class:"contact-form-label"},Ce=["placeholder"],xe={key:0,class:"contact-form-error-message"},Ee={class:"contact-form-title"},Ne={class:"contact-form-section"},Le={disabled:"",value:"",class:"contact-form-placeholder"},Pe=["value"],je={key:0,class:"contact-form-error-message"},Te={class:"contact-form-grid"},ze={class:"contact-form-section"},qe={class:"contact-form-label"},Ue=["placeholder"],Ae={key:0,class:"contact-form-error-message"},Ve={class:"contact-form-section"},Ie={class:"contact-form-label"},Re=["placeholder"],Fe={key:0,class:"contact-form-error-message"},Be={class:"contact-form-section"},Ge={class:"contact-form-label"},Je=["placeholder"],We={key:0,class:"contact-form-error-message"},Me={class:"contact-form-grid"},De={class:"contact-form-section"},Oe={class:"contact-form-label"},Qe=["placeholder"],Xe={key:0,class:"contact-form-error-message"},Ze={class:"contact-form-section"},He={class:"contact-form-label"},Ke=["placeholder"],Ye={key:0,class:"contact-form-error-message"},et={class:"contact-form-footer"},tt={type:"button"},ot={type:"submit",class:"contact-form-submit view-all"},at={key:0},st={key:1,class:"contact-form-loading"},rt={__name:"ContactForm",setup(f){const e=W({email:null,firstName:null,lastName:null,address:null,zip:null,land:null,phone:null,city:null}),{t:a}=G(),n=R().shape({email:$().email(a("validation.validation.email.invalid")).required(a("validation.validation.email.required")),firstName:$().required(a("validation.validation.firstName")),lastName:$().required(a("validation.validation.lastName")),address:$().required(a("validation.validation.address")),land:he(o=>typeof o=="object"&&o!==null?R().shape({tel_code:$().required(),name:$().required(),code:$().required(),flag:R().shape({png:$().url().required(),svg:$().url().required(),alt:$()}).required()}).required(a("validation.validation.land")):typeof o=="string"?$().min(1).required(a("validation.validation.land")):ve().required(a("validation.validation.land"))),zip:$().required(a("validation.validation.zip")),city:$().required(a("validation.validation.city"))}),{mutate:r,isLoading:h}=te("checkout").useStore(),b=async()=>{try{await n.validate(i.value,{abortEarly:!1});const o=H(i.value);r(o,{onSuccess:l=>{l?.url&&(Y(),window.location.href=l.url)}})}catch(o){o.inner.forEach(l=>{e[l.path]=l.message}),console.error("Validation Errors:",e)}},C=w([]),{locale:d}=G(),P=async()=>{try{const o=await ie.get("https://restcountries.com/v3.1/region/europe?fields=languages,flags,cca2,idd,alpha,translations,name");C.value=o.data}catch(o){console.error("Error fetching countries:",o)}},N=oe(()=>C.value.map(o=>{const l=d.value==="de"?"deu":"eng";return{name:o.translations[l]?.common||o.name.common,tel_code:o.idd.root+(o.idd.suffixes?o.idd.suffixes[0]:""),code:o.cca2,flag:o.flags}}).sort((o,l)=>o.name.localeCompare(l.name))),V=()=>{if(i.value.land.tel_code)if(i.value.phone){if(i.value.phone.startsWith("+")||i.value.phone.startsWith("00"))return;i.value.phone=i.value.land.tel_code+i.value.phone}else i.value.phone=i.value.land.tel_code},Z=()=>{Object.keys(i.value).forEach(o=>{ce(()=>i.value[o],()=>{e[o]&&(e[o]=null)})})},H=o=>({email:o.email,first_name:`${o.firstName.charAt(0).toUpperCase()}${o.firstName.slice(1)}`,last_name:`${o.lastName.charAt(0).toUpperCase()}${o.lastName.slice(1)}`,address_line_one:`${o.address.charAt(0).toUpperCase()}${o.address.slice(1)}, ${o.zip}, ${o.city.charAt(0).toUpperCase()}${o.city.slice(1)}, ${o.land.name}`,address_line_two:`${o.address.charAt(0).toUpperCase()}${o.address.slice(1)}, ${o.zip}, ${o.city.charAt(0).toUpperCase()}${o.city.slice(1)}, ${o.land.name}`,products:K(L.value.cartItems),promo_code:`${L.value.promoCode}`});function K(o){return o.flatMap(l=>l.items.map(j=>({id:j.id,quantity:j.cartQuantity})))}function Y(){Object.keys(e).forEach(o=>{e[o]=null}),L.value.promoCode=""}return ae(()=>{P(),Z()}),(o,l)=>{const j=B("router-link");return c(),u("form",{onSubmit:le(b,["prevent"]),class:"contact-form"},[t("div",ke,[p(ye,{content:o.$t("common.forms.emailTooltip")},null,8,["content"]),t("h1",we,s(o.$t("common.forms.contact")),1),t("label",Se,s(o.$t("common.forms.emailLabel")),1),y(t("input",{"onUpdate:modelValue":l[0]||(l[0]=v=>m(i).email=v),type:"email",autofocus:"",autocomplete:"email",class:k(["contact-form-input",e.email?"contact-form-error":""]),placeholder:o.$t("common.forms.emailPlaceholder")},null,10,Ce),[[E,m(i).email]]),p(x,{name:"fade"},{default:_(()=>[e.email?(c(),u("p",xe,s(e.email),1)):g("",!0)]),_:1})]),t("h1",Ee,s(o.$t("common.forms.deliveryAddress")),1),t("div",Ne,[l[7]||(l[7]=t("label",{class:"contact-form-label"}," Land / Region ",-1)),y(t("select",{"onUpdate:modelValue":l[1]||(l[1]=v=>m(i).land=v),onChange:V,autocomplete:"country-name",class:k(["contact-form-input",e.land?"contact-form-error":""])},[t("option",Le,s(o.$t("common.forms.landPlaceholder")),1),(c(!0),u(S,null,A(N.value,v=>(c(),u("option",{key:v.code,value:v,class:"contact-form-option"},s(v.name),9,Pe))),128))],34),[[se,m(i).land]]),p(x,{name:"fade"},{default:_(()=>[e.land?(c(),u("p",je,s(e.land),1)):g("",!0)]),_:1})]),t("div",Te,[t("div",ze,[t("label",qe,s(o.$t("common.forms.firstNameLabel")),1),y(t("input",{"onUpdate:modelValue":l[2]||(l[2]=v=>m(i).firstName=v),type:"text",autocomplete:"given-name",class:k(["contact-form-input",e.firstName?"contact-form-error":""]),placeholder:o.$t("common.forms.firstNamePlaceholder")},null,10,Ue),[[E,m(i).firstName]]),p(x,{name:"fade"},{default:_(()=>[e.firstName?(c(),u("p",Ae,s(e.firstName),1)):g("",!0)]),_:1})]),t("div",Ve,[t("label",Ie,s(o.$t("common.forms.lastNameLabel")),1),y(t("input",{"onUpdate:modelValue":l[3]||(l[3]=v=>m(i).lastName=v),type:"text",autocomplete:"family-name",class:k(["contact-form-input",e.lastName?"contact-form-error":""]),placeholder:o.$t("common.forms.lastNamePlaceholder")},null,10,Re),[[E,m(i).lastName]]),p(x,{name:"fade"},{default:_(()=>[e.lastName?(c(),u("p",Fe,s(e.lastName),1)):g("",!0)]),_:1})])]),t("div",Be,[t("label",Ge,s(o.$t("common.forms.addressLabel")),1),y(t("input",{"onUpdate:modelValue":l[4]||(l[4]=v=>m(i).address=v),type:"text",autocomplete:"street-address",class:k(["contact-form-input",e.address?"contact-form-error":""]),placeholder:o.$t("common.forms.addressPlaceholder")},null,10,Je),[[E,m(i).address]]),p(x,{name:"fade"},{default:_(()=>[e.address?(c(),u("p",We,s(e.address),1)):g("",!0)]),_:1})]),t("div",Me,[t("div",De,[t("label",Oe,s(o.$t("common.forms.zipLabel")),1),y(t("input",{"onUpdate:modelValue":l[5]||(l[5]=v=>m(i).zip=v),type:"text",autocomplete:"postal-code",class:k(["contact-form-input",e.zip?"contact-form-error":""]),placeholder:o.$t("common.forms.zipPlaceholder")},null,10,Qe),[[E,m(i).zip]]),p(x,{name:"fade"},{default:_(()=>[e.zip?(c(),u("p",Xe,s(e.zip),1)):g("",!0)]),_:1})]),t("div",Ze,[t("label",He,s(o.$t("common.forms.cityLabel")),1),y(t("input",{"onUpdate:modelValue":l[6]||(l[6]=v=>m(i).city=v),type:"text",autocomplete:"address-level2",class:k(["contact-form-input",e.city?"contact-form-error":""]),placeholder:o.$t("common.forms.cityPlaceholder")},null,10,Ke),[[E,m(i).city]]),p(x,{name:"fade"},{default:_(()=>[e.city?(c(),u("p",Ye,s(e.city),1)):g("",!0)]),_:1})])]),t("div",et,[t("button",tt,[p(j,{to:"/cart",class:"contact-form-back-link"},{default:_(()=>[p(m(re),{size:"20"}),F(s(o.$t("common.forms.backToCart")),1)]),_:1})]),t("button",ot,[m(h)?(c(),u("div",st,[p(ne,{class:"h-6 w-8"})])):(c(),u("div",at,s(o.$t("common.forms.continueToShipping")),1))])])],32)}}},nt={class:"breadcrumb-container"},lt={class:"mb-3 py-2 breadcrumb flex flex-wrap items-center"},it={class:"breadcrumb-item"},ct={__name:"Breadcrumbs",props:{data:{type:Array}},setup(f){return(e,a)=>{const n=B("router-link");return c(),u("div",nt,[t("div",lt,[(c(!0),u(S,null,A(f.data,(r,h)=>(c(),u(S,{key:h},[t("div",it,[p(n,{to:r.link,class:k([r.current?"text-gray underline":"text-main",r.link&&"hover:text-gray"])},{default:_(()=>[F(s(r.title),1)]),_:2},1032,["to","class"])]),h<f.data.length-1?(c(),M(m(de),{key:0,size:"20",class:"mx-2"})):g("",!0)],64))),128))])])}}};var D="basil",dt=function(e){return e===3?"v3":e},O="https://js.stripe.com",ut="".concat(O,"/").concat(D,"/stripe.js"),mt=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,pt=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var ft=function(e){return mt.test(e)||pt.test(e)},ht=function(){for(var e=document.querySelectorAll('script[src^="'.concat(O,'"]')),a=0;a<e.length;a++){var n=e[a];if(ft(n.src))return n}return null},J=function(e){var a="",n=document.createElement("script");n.src="".concat(ut).concat(a);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},vt=function(e,a){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.3.0",startTime:a})},T=null,q=null,U=null,_t=function(e){return function(a){e(new Error("Failed to load Stripe.js",{cause:a}))}},$t=function(e,a){return function(){window.Stripe?e(window.Stripe):a(new Error("Stripe.js not available"))}},gt=function(e){return T!==null?T:(T=new Promise(function(a,n){if(typeof window>"u"||typeof document>"u"){a(null);return}if(window.Stripe){a(window.Stripe);return}try{var r=ht();if(!(r&&e)){if(!r)r=J(e);else if(r&&U!==null&&q!==null){var h;r.removeEventListener("load",U),r.removeEventListener("error",q),(h=r.parentNode)===null||h===void 0||h.removeChild(r),r=J(e)}}U=$t(a,n),q=_t(n),r.addEventListener("load",U),r.addEventListener("error",q)}catch(b){n(b);return}}),T.catch(function(a){return T=null,Promise.reject(a)}))},bt=function(e,a,n){if(e===null)return null;var r=a[0],h=r.match(/^pk_test/),b=dt(e.version),C=D;h&&b!==C&&console.warn("Stripe.js@".concat(b," was loaded on the page, but @stripe/stripe-js@").concat("7.3.0"," expected Stripe.js@").concat(C,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var d=e.apply(void 0,a);return vt(d,n),d},z,Q=!1,X=function(){return z||(z=gt(null).catch(function(e){return z=null,Promise.reject(e)}),z)};Promise.resolve().then(function(){return X()}).catch(function(f){Q||console.warn(f)});var yt=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];Q=!0;var r=Date.now();return X().then(function(h){return bt(h,a,r)})};const kt={class:"md:max-h-[50%] overflow-auto border grid grid-cols-1 md:grid-cols-2 border-gray"},wt={class:"grid m-6 text-main gap-3"},St={class:"flex justify-between"},Ct={class:"text-sm"},xt={class:"text-sm"},Et={class:"flex justify-between"},Nt={class:"text-sm"},Lt={key:0,class:"text-sm"},Pt={key:1,class:"text-sm"},jt={class:"py-3 border-t border-b border-gray"},Tt={for:"promoCode",class:"block mb-2 text-sm"},zt={class:"flex items-center gap-2"},qt=["placeholder"],Ut={key:0,class:"text-green-500 text-xs mt-2"},At={key:1,class:"text-red-500 text-xs mt-2"},Vt={class:"mb-4"},It={class:"flex justify-between"},Rt={class:"text-xl font-bold"},Ft={class:"text-xl font-bold"},Bt={class:"text-zinc-200 text-sm"},Gt={__name:"CheckoutCart",setup(f){W(null);const e=w(""),a=w(0),n=w(!1),r=w(!1),h=w(!1),b=()=>{n.value=!1,r.value=!1,a.value=0,h.value=!1,e.value&&e.value.trim()!==""?e.value.trim().toLowerCase()==="pickup"?(L.value.promoCode="pickup",n.value=!0,h.value=!0):(n.value=!1,a.value=10):r.value=!0},C=()=>{let d=I();return d<100&&!h.value&&(d+=5.9),n.value&&a.value>0&&(d=Math.max(0,d-a.value)),d.toFixed(2)};return ue(()=>{L.value.promoCode="";const d=w(!1);yt("pk_test_51Q6bWxP4hoAjrgc6miCYAr7rLP9JnfLtuI8n4dAD6jph6nSEiPtw8oraXNzWmGd1rITIsTIJdcJ77DuGQGExXTJj00FvJsHgE0").then(()=>{d.value=!0})}),(d,P)=>(c(),u(S,null,[t("div",kt,[(c(!0),u(S,null,A(m(L).cartItems,N=>(c(),u(S,null,[(c(!0),u(S,null,A(N.items,V=>(c(),M(me,{product:N,item:V,label:"no-label"},null,8,["product","item"]))),256))],64))),256))]),t("div",wt,[t("div",St,[t("p",Ct,s(d.$t("pages.checkout.subtotal",{itemCount:m(pe)()})),1),t("p",xt,s(m(I)())+" "+s(d.$currency),1)]),t("div",Et,[t("p",Nt,s(d.$t("pages.checkout.shipping")),1),m(I)()>=100||h.value?(c(),u("p",Lt,s(d.$t("pages.checkout.free")),1)):(c(),u("p",Pt,"5.90 "+s(d.$currency),1))]),t("div",jt,[t("label",Tt,s(d.$t("pages.checkout.promoCode")),1),t("div",zt,[y(t("input",{type:"text",id:"promoCode","onUpdate:modelValue":P[0]||(P[0]=N=>e.value=N),class:"flex-1 px-4 py-4 border border-gray text-sm focus:outline-none text-accent",placeholder:d.$t("pages.checkout.enterPromoCode")},null,8,qt),[[E,e.value]]),t("button",{onClick:b,class:"checkout-cart-promo-button view-all text-xs"},s(d.$t("pages.checkout.apply")),1)]),n.value?(c(),u("p",Ut,s(d.$t("pages.checkout.promoApplied")),1)):g("",!0),r.value?(c(),u("p",At,s(d.$t("pages.checkout.invalidPromo")),1)):g("",!0)]),t("div",Vt,[t("div",It,[t("p",Rt,[t("strong",null,s(d.$t("pages.checkout.total")),1)]),t("p",Ft,s(C())+" "+s(d.$currency),1)]),t("p",Bt,s(d.$t("pages.checkout.includingTaxes",{taxAmount:"19%"})),1)])])],64))}},Jt={class:"checkout-container"},Wt={class:"checkout-form-container"},Mt={class:"checkout-form-content"},Dt=["src"],Ot={class:"checkout-cart-container"},Qt={class:"checkout-footer"},Xt={class:"checkout-footer-links"},Kt={__name:"Checkout",setup(f){const e=w([{title:"Warenkorb",link:"/cart"},{title:"Information",current:!0,link:"/checkout"},{title:"Zahlung",link:""}]);return(a,n)=>{const r=B("router-link");return c(),u(S,null,[t("div",Jt,[t("div",Wt,[t("div",Mt,[p(r,{to:"/"},{default:_(()=>[t("img",{src:m(fe),alt:"logo",class:"checkout-logo"},null,8,Dt)]),_:1}),p(ct,{data:e.value,class:"checkout-breadcrumbs"},null,8,["data"]),p(rt,{class:"checkout-contact-form"})])]),t("div",Ot,[p(Gt)])]),t("div",Qt,[n[0]||(n[0]=t("hr",null,null,-1)),t("div",Xt,[p(r,{to:"/widerrufsrecht",class:"link-button"},{default:_(()=>[t("span",null,s(a.$t("layout.footer.widerrufsrecht")),1)]),_:1}),p(r,{to:"/versand",class:"link-button"},{default:_(()=>[t("span",null,s(a.$t("layout.footer.versand")),1)]),_:1}),p(r,{to:"/datenschutzerklaerung",class:"link-button"},{default:_(()=>[t("span",null,s(a.$t("layout.footer.datenschutzerklaerung")),1)]),_:1}),p(r,{to:"/agb",class:"link-button"},{default:_(()=>[t("span",null,s(a.$t("layout.footer.agb")),1)]),_:1}),p(r,{to:"/impressum",class:"link-button"},{default:_(()=>[t("span",null,s(a.$t("layout.footer.impressum")),1)]),_:1})])])],64)}}};export{Kt as default};
