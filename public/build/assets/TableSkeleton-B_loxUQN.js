import{ay as w,az as _,q as x,V as v,r as I,d as r,e as n,f as b,h as g,l as C,u as p,C as F,i as f,F as h,G as S}from"./app-qWsV0RSm.js";const d=x(),j=async a=>{const e=new FormData;e.append("image",a);try{return(await v.post("/save",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw new Error(t.response?.data?.message||"Failed to upload image")}},z=()=>{const a=w();return _({mutationFn:e=>j(e),onSuccess:()=>{a.invalidateQueries(["products","product-items"]),d.success("Image Uploaded Successfully!")},onError:e=>{e.errors?Object.values(e?.errors).flat().forEach(t=>{d.error(t)}):d.error(e?.message||"An error occurred")}})},B={class:"relative inline-block shrink-0 rounded-2xl me-3 w-[100px] h-[100px] shadow-xl"},E=["src"],L="https://raw.githubusercontent.com/Loopple/loopple-public-assets/main/riva-dashboard-tailwind/img/img-49-new.jpg",D={__name:"ProductImg",props:{product:{type:Object}},emits:"handle:img",setup(a,{emit:e}){const t=e,s=I(null),{mutate:c,isLoading:o}=z(),y=(i,l)=>{const m=i.target.files[0];c(m,{onSuccess:u=>{l.image=u.image,t("handle:img",{product:l,img:"image",value:{image:u.image,image_mime:u.image_mime,image_size:u.image_size}})}})},k=i=>{i.preventDefault(),s.value&&s.value.click()};return(i,l)=>(n(),r("div",B,[b("input",{type:"file",accept:"image/*",onChange:l[0]||(l[0]=m=>y(m,a.product)),class:"hidden",ref_key:"imageInput",ref:s},null,544),p(o)?g("",!0):(n(),r("img",{key:0,src:a.product.image||a.product.image_url||L,class:"w-full h-full inline-block shrink-0 rounded-2xl cursor-pointer object-contain",alt:"Image",loading:"lazy",onClick:k},null,8,E)),p(o)?(n(),C(F,{key:1,class:"w-full h-full inline-block shrink-0 rounded-2xl bg-lime-500 object-contain"})):g("",!0)]))}},T={__name:"TableSkeleton",props:{rows:{type:Number,default:15},columns:{type:Number,default:5}},setup(a){const e=t=>{const s={1:"w-6 h-4 bg-main rounded",2:"h-12 w-12 bg-main rounded-full mr-3",default:"w-full h-4 bg-main rounded grow"};return s[t]||s.default};return(t,s)=>(n(!0),r(h,null,f(a.rows,c=>(n(),r("tr",{class:"border-b border-dashed last:border-b-0 border-main animate-pulse",key:c},[(n(!0),r(h,null,f(a.columns,o=>(n(),r("td",{key:o,class:"p-3 px-2 text-center"},[b("div",{class:S(e(o))},null,2)]))),128))]))),128))}};export{D as _,T as a};
