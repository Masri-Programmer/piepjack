import{a as I,L as O,r as N,d,e as n,f as t,h as L,g as k,t as p,F as h,i as x,A as P,af as S,u as i,B,C as A,av as j,y as E,l as C,k as H,ar as G,s as M,w as T}from"./app-BX9q5LML.js";import{_ as F}from"./PageLayout-Dt93K8O0.js";import{_ as q,a as Q}from"./TableSkeleton-BH5SfMnb.js";import{_ as D}from"./ToggleSwitch-B42VGsBT.js";import"./index.esm-2zxim1a4.js";const R={class:"border-b border-dashed last:border-b-0 border-main"},z={class:"p-3"},J={class:"relative inline-block shrink-0 rounded-2xl me-3"},K={class:"font-bold p-3"},W=["value"],X=["onUpdate:modelValue","name"],Y={disabled:"",value:""},Z=["value"],tt={key:0,class:"pr-0 text-start"},et={key:1,class:"pr-0 text-start"},st={class:"p-3 text-start"},at={class:"p-3 text-start"},ot={class:"p-3 text-start"},nt={class:"p-3 pr-0"},it=["disabled"],rt={key:0,class:"flex justify-center"},dt={key:1},lt={__name:"ProductItemRow",props:{product:{type:Object,required:!0}},emits:"success:store",setup(u,{emit:w}){const _=u,{mutate:$,isLoading:m}=I("product-items").useStore(),{data:f,isLoading:v}=I("category-variations").useGetById(_.product?.category?.id),o=O({active:!0,image:null,name:_.product.name,variations:[],price:null,quantity:null,product_id:_.product.id}),V=N(null),g=async()=>{o.active=o.active?1:0,o.variations=Object.values(o.variations).filter(U=>U!==null&&U!==""),o.category_id=_.product.category?.id??null,await $(o,{onSuccess:()=>{o.variations=[],o.image=null},onError:()=>{o.variations=[]}})};return(U,l)=>(n(),d("tr",R,[l[7]||(l[7]=t("td",null,"ID",-1)),t("td",z,[t("div",J,[k(q,{product:o,"onHandle:img":l[0]||(l[0]=e=>Object.assign(o,e.value))},null,8,["product"])])]),t("td",K,p(o.name),1),(n(!0),d(h,null,x(i(f)?.data,e=>(n(),d("td",{key:e.id,class:"p-3 font-bold rounded-md focus:outline-none focus:ring focus:ring-accent_dark",value:e.id},[P(t("select",{"onUpdate:modelValue":a=>o.variations[e.id]=a,name:e.name,ref_for:!0,ref_key:"OptionSelect",ref:V,class:"border rounded p-2 w-full"},[t("option",Y,"Select "+p(e.name),1),(n(!0),d(h,null,x(e?.options,a=>(n(),d("option",{key:a.id,value:a.id},p(a.value),9,Z))),128))],8,X),[[S,o.variations[e.id]]])],8,W))),128)),i(v)?(n(),d("td",tt,l[5]||(l[5]=[t("span",{class:"p-3 border-b border-dashed last:border-b-0 border-main animate-pulse"},[t("div",{class:"w-full h-10 bg-gray rounded"})],-1)]))):L("",!0),i(v)?(n(),d("td",et,l[6]||(l[6]=[t("span",{class:"p-3 border-b border-dashed last:border-b-0 border-main animate-pulse"},[t("div",{class:"w-full h-10 bg-gray rounded"})],-1)]))):L("",!0),t("td",st,[k(D,{modelValue:o.active,"onUpdate:modelValue":l[1]||(l[1]=e=>o.active=e),"onUpdate:toggle":l[2]||(l[2]=e=>o.active=e)},null,8,["modelValue"])]),t("td",at,[P(t("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>o.price=e),placeholder:"Price",type:"Number",id:"price",class:"border-0 mt-1 block font-bold w-full p-2 rounded-md focus:outline-none focus:ring focus:ring-accent_dark"},null,512),[[B,o.price]])]),t("td",ot,[P(t("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>o.quantity=e),placeholder:"Quantity",type:"Number",id:"quantity",class:"border-0 mt-1 block font-bold w-full p-2 rounded-md focus:outline-none focus:ring focus:ring-accent_dark"},null,512),[[B,o.quantity]])]),t("td",nt,[t("button",{onClick:g,type:"submit",disabled:i(m),class:"text-white bg-accent_dark hover:bg-accent_light focus:ring-4 focus:ring-cyan-200 font-medium rounded-lg text-sm px-5 py-2.5 text-center w-full"},[i(m)?(n(),d("span",rt,[k(A,{class:"w-8 h-5"})])):(n(),d("span",dt,"Save"))],8,it)])]))}},ut={class:"flex-auto block text-accent"},ct={class:"overflow-x-auto"},pt={class:"w-full my-0 align-middle text-dark border-neutral-200"},mt={class:"align-bottom"},ft={class:"font-semibold text-[0.95rem] text-gray"},gt={key:0,class:"p-3 text-start min-w-[135px] uppercase"},_t={class:"p-3 text-start min-w-[135px] uppercase"},bt={class:"p-3 text-start min-w-[135px] uppercase"},vt={class:"border-b border-dashed last:border-b-0 border-main"},yt={class:"p-3"},ht={class:"p-3"},xt={class:"mt-1 block font-bold w-full p-2 rounded-md focus:outline-none focus:ring focus:ring-accent_dark"},kt=["onUpdate:modelValue","onChange"],wt=["value"],$t={class:"p-3 text-start"},Vt={class:"pr-0 text-start"},Ut=["onUpdate:modelValue","onChange"],Lt={class:"p-3 pr-2 text-start"},It=["onUpdate:modelValue","onChange"],Pt={class:"p-3 text-start"},Bt=["disabled","onClick"],Ct={__name:"ProductDetails",props:{data:{type:Object},isLoading:{type:Boolean},storeValue:{type:Boolean}},setup(u){const w=u,[_,$]=j(),{mutate:m}=I("product-items").useUpdate(),f=async(e,a,s)=>{const b=e.options.map(c=>c.variation_id===s.variation_id?{...s}:c),r=a==="image"?{...e,...s,options:b,variations:b.map(c=>c.variation_option_id)}:{...e,options:b,[a]:s,variations:b.map(c=>c.variation_option_id)};m({id:e.id,data:r})},{mutate:v,isLoading:o}=I("product-items").useDelete(),V=async e=>{v(e)},{data:g,isLoading:U}=I("category-variations").useGetById(w.data.category?.id);E(()=>w.storeValue,e=>{e&&$(e)});function l(e,a){const s=e.options.find(b=>b.value===a);return{variation_id:e.id,name:e.name,value:s.value,variation_option_id:s.id}}return(e,a)=>(n(),d("div",ut,[t("div",ct,[t("table",pt,[t("thead",mt,[t("tr",ft,[a[1]||(a[1]=t("th",{class:"py-3 text-start uppercase"},"ID",-1)),a[2]||(a[2]=t("th",{class:"p-3 text-start min-w-[95px] uppercase"},"IMG",-1)),a[3]||(a[3]=t("th",{class:"p-3 text-start min-w-[175px] uppercase"},"NAME",-1)),!u.data?.items&&!i(g)?(n(),d("th",gt," options ")):u.data.items.length?(n(!0),d(h,{key:1},x(u.data.items?.[0]?.options,s=>(n(),d("th",_t,p(s.name),1))),256)):i(g)?.data?(n(!0),d(h,{key:2},x(i(g).data,s=>(n(),d("th",bt,p(s.name),1))),256)):L("",!0),a[4]||(a[4]=t("th",{class:"p-3 text-start uppercase"},"PUBLISHED",-1)),a[5]||(a[5]=t("th",{class:"p-3 text-start uppercase min-w-[95px]"},"price",-1)),a[6]||(a[6]=t("th",{class:"p-3 text-start uppercase min-w-[95px]"},"quantity",-1))])]),t("tbody",null,[u.isLoading?(n(),C(Q,{key:0,rows:15,columns:8})):L("",!0),i(_)?(n(),C(lt,{key:1,product:u.data,"onSuccess:store":a[0]||(a[0]=s=>i($)(!1))},null,8,["product"])):L("",!0),!u.isLoading&&u.data?.items?(n(!0),d(h,{key:2},x(u.data?.items,(s,b)=>(n(),d("tr",vt,[t("td",null,p(s.id),1),t("td",yt,[k(q,{product:s,"onHandle:img":r=>f(r.product,r.img,r.value)},null,8,["product","onHandle:img"])]),t("td",ht,[t("div",xt,p(u.data.name),1)]),(n(!0),d(h,null,x(u.data?.items[b].options.slice().sort((r,c)=>r.variation_id-c.variation_id),(r,c)=>(n(),d("td",{class:"p-3",key:r.variation_option_id},[H(p(s.options[c].value)+" ",1),P(t("select",{class:"font-bold w-full pb-1 rounded-md focus:outline-none focus:ring focus:ring-accent_dark flex items-center gap-1 justify-between py-1 px-2 mr-4","onUpdate:modelValue":y=>s.options[c].value=y,onChange:y=>f(s,"variations",l(i(g)?.data[c],y.target.value))},[(n(!0),d(h,null,x(i(g)?.data[c].options,y=>(n(),d("option",{key:y.id,value:y.value},p(y.value),9,wt))),128))],40,kt),[[S,s.options[c].value]])]))),128)),t("td",$t,[k(D,{modelValue:s.active,"onUpdate:modelValue":r=>s.active=r,"onUpdate:toggle":r=>f(s,"active",r)},null,8,["modelValue","onUpdate:modelValue","onUpdate:toggle"])]),t("td",Vt,[P(t("input",{"onUpdate:modelValue":r=>s.price=r,placeholder:"Price",type:"Number",id:"price",onChange:r=>f(s,"price",r.target.value),class:"border-0 mt-1 block font-bold w-full p-2 rounded-md focus:outline-none focus:ring focus:ring-accent_dark"},null,40,Ut),[[B,s.price]])]),t("td",Lt,[P(t("input",{"onUpdate:modelValue":r=>s.quantity=r,placeholder:"Quantity",type:"Number",id:"quantity",onChange:r=>f(s,"quantity",r.target.value),class:"border-0 mt-1 block font-bold w-full p-2 rounded-md focus:outline-none focus:ring focus:ring-accent_dark"},null,40,It),[[B,s.quantity]])]),t("td",Pt,[t("button",{disabled:i(o),class:"ml-auto relative text-main bg-accent hover:text-white hover:bg-red-500 flex items-center h-[30px] w-[30px] text-base font-medium leading-normal text-center align-middle cursor-pointer rounded-2xl transition-colors duration-200 ease-in-out shadow-none border-0 justify-center",onClick:()=>V(s.id)},[k(i(G),{size:"16","stroke-width":"1.5"})],8,Bt)])]))),256)):L("",!0)])])])]))}},Nt={class:"flex flex-col justify-between items-stretch flex-wrap min-h-[70px] pb-6 text-accent"},St={class:"flex flex-col items-start justify-center m-2 ml-0 font-medium text-xl/tight text-dark"},jt={class:"mr-3 font-semibold text-dark"},Ht={__name:"Product",setup(u){const w=M(),_=w.params.id,$=w.params.slug,{data:m,error:f,isLoading:v,refetch:o}=I("products").useGetById(_),[V,g]=j(),U=N([{title:"Home",link:"/admin/dashboard"},{title:"Products",link:"/admin/products"},{title:$,current:!0,link:""}]);return(l,e)=>(n(),C(F,{data:U.value,empty:{b:!i(m)?.data?.items.length&&!i(v),t:"No Product Items Found"},isLoading:i(v),error:i(f),title:i(m)?.data?.name,"onButton:click":e[0]||(e[0]=a=>i(g)(!i(V))),button:{title:"Add New Product Item",click:!0}},{default:T(()=>[t("div",Nt,[t("h3",St,[t("span",jt,"All Product Items ("+p(i(m).data?.items.length??0)+")",1),e[1]||(e[1]=t("span",{class:"mt-1 font-medium text-gray text-lg/normal"},"Exlusive from Piepjackclothing",-1))]),k(Ct,{data:i(m)?.data,storeValue:i(V)},null,8,["data","storeValue"])])]),_:1},8,["data","empty","isLoading","error","title"]))}};export{Ht as default};
